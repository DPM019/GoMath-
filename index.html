<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GoMath! - Real-World Math Trainer</title>
    
    <!-- 
        ==================================================
        CSS STYLES 
        ==================================================
    -->
    <style>
        :root {
            --pink: #f4a6b5;
            --yellow: #f4e04d;
            --card: #ffffff;
            --badge-bg: #ffe07d;
            --badge-color: #222;
            --correct-bg: #c8e6c9; /* Light green for correct answers */
            --wrong-bg: #ffcdd2; /* Light red for wrong answers */
            --stat-border: #f4a6b5; /* Pink border for stat boxes */
        }

        /* GENERAL LAYOUT */
        html, body {
            margin: 0;
            padding: 0;
            font-family: Arial, sans-serif; 
            background: var(--pink);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            color: #333;
        }

        /* HEADER */
        header {
            background: var(--yellow);
            padding: 20px 24px;
            display: flex;
            align-items: center;
            justify-content: flex-start; 
            gap: 16px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            width: 100%;
            box-sizing: border-box;
        }

        .header-content {
            display: flex;
            align-items: center;
            gap: 20px;
            width: 100%;
            /* Removed max-width and margin: 0 auto to align left */
            margin: 0;
        }

        .logo {
            width: 90px;
            height: 90px;
            flex-shrink: 0;
            border-radius: 12px;
            overflow: hidden; 
            display: flex;
            align-items: center;
            justify-content: center;
            background-color: #fff;
        }
        
        .logo img {
            width: 100%;
            height: 100%;
            object-fit: contain; 
        }

        h1 {
            margin: 0;
            font-size: 40px;
            font-weight: 900;
            color: #333;
            line-height: 1;
        }

        .small {
            font-size: 18px;
            color: #555;
            font-weight: 600;
            margin-top: 5px;
        }

        /* MAIN LAYOUT */
        .container {
            flex-grow: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
            gap: 20px;
            margin-top: 30px;
            width: 100%;
            box-sizing: border-box;
        }

        /* WELCOME SCREEN */
        #welcomeScreen {
            width: 100%;
            max-width: 900px;
            background: var(--card);
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.2);
            text-align: center;
        }

        .welcome-title {
            font-size: 40px;
            font-weight: 900;
            color: #4a4a4a;
            margin-bottom: 10px;
            color: var(--pink);
        }

        .welcome-tagline {
            font-size: 22px;
            color: #555;
            margin-bottom: 30px;
            border-bottom: 3px solid var(--pink);
            padding-bottom: 15px;
            font-weight: 600;
            display: inline-block;
        }

        .welcome-text {
            font-size: 18px;
            color: #333;
            line-height: 1.6;
            margin-bottom: 20px;
            text-align: left;
        }

        .welcome-highlight {
            font-size: 20px;
            font-weight: 700;
            color: var(--pink);
            background: #fff0f5;
            padding: 20px;
            border-radius: 12px;
            margin-bottom: 40px;
            border: 2px dashed var(--pink);
        }

        .category-list {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 25px;
            margin-bottom: 40px;
        }

        .category-item {
            background: #fcfcfc;
            border: 2px solid #eee;
            padding: 20px;
            border-radius: 15px;
            text-align: left;
            box-shadow: 0 4px 10px rgba(0,0,0,0.05);
            transition: transform 0.2s;
        }
        
        .category-item:hover {
            transform: translateY(-5px);
            border-color: var(--pink);
        }

        .item-title {
            font-size: 22px;
            font-weight: 800;
            margin-bottom: 5px;
            color: #222;
        }

        .item-subtitle {
            font-size: 14px;
            color: var(--pink);
            font-weight: 700;
            margin-bottom: 10px;
            text-transform: uppercase;
        }

        .category-item p {
            font-size: 15px;
            color: #555;
            line-height: 1.4;
        }

        .welcome-text-footer {
            font-size: 28px;
            font-weight: 900;
            color: #222;
            margin-top: 40px;
        }
        
        .welcome-subtext {
            font-size: 18px;
            color: #666;
            margin-bottom: 30px;
        }

        .welcome-ready {
            font-size: 22px;
            font-weight: 700;
            color: var(--pink);
            margin-bottom: 30px;
        }

        .start-btn {
            font-size: 26px;
            padding: 20px 60px;
            border-radius: 50px;
            background: var(--pink);
            color: white;
            font-weight: 900;
            letter-spacing: 1px;
            border: none;
            cursor: pointer;
            box-shadow: 0 6px 0 #cc8897; 
            transform: translateY(0);
            transition: all 0.1s;
        }

        .start-btn:hover {
            background: #e695a4;
        }

        .start-btn:active {
            transform: translateY(6px);
            box-shadow: 0 0 0 #cc8897;
        }


        /* CATEGORY CARD */
        #categoryCard {
            display: none; 
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: 24px;
            width: 100%;
            max-width: 900px;
            padding: 40px;
            background: var(--card);
            border-radius: 20px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.2);
            text-align: center;
        }

        .challenge-title {
            font-size: 36px;
            font-weight: 900;
            color: #222;
            margin-bottom: 30px;
        }
        
        .category-grid {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 24px;
            width: 100%;
        }

        .category {
            flex: 1 1 260px;
            max-width: 300px;
            background: var(--yellow);
            padding: 60px 20px;
            border-radius: 18px;
            cursor: pointer;
            user-select: none;
            text-align: center;
            font-size: 24px;
            font-weight: 900;
            color: #222;
            transition: transform 0.1s;
            box-shadow: 0 8px 0 #e6d43d;
            border: none;
        }

        .category:hover {
            transform: translateY(-4px);
            box-shadow: 0 12px 0 #e6d43d;
        }

        .category:active {
            transform: translateY(4px);
            box-shadow: 0 4px 0 #e6d43d;
        }
        
        .secondary-btn {
            background: none;
            color: var(--pink);
            border: 3px solid var(--pink);
            padding: 12px 30px;
            border-radius: 15px;
            font-weight: 800;
            cursor: pointer;
            transition: background 0.2s, color 0.2s;
            margin-top: 20px;
            font-size: 18px;
        }

        .secondary-btn:hover {
            background: var(--pink);
            color: white;
        }

        /* QUIZ AREA */
        #questionArea {
            display: none;
            flex-direction: column;
            align-items: center;
            width: 100%;
            max-width: 800px;
            background: var(--card);
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 8px 30px rgba(0,0,0,0.15);
        }

        #catLabel {
            display: inline-block;
            background: var(--badge-bg);
            color: var(--badge-color);
            font-weight: 800;
            font-size: 16px;
            padding: 10px 20px;
            border-radius: 50px;
            margin-bottom: 20px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .question {
            font-weight: 800;
            font-size: 28px;
            margin-bottom: 30px;
            text-align: center;
            color: #222;
            line-height: 1.4;
        }

        #inputArea {
            width: 100%;
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .choiceBtn {
            width: 100%;
            padding: 20px 25px;
            border-radius: 16px;
            border: 3px solid #eee;
            border-bottom: 6px solid #eee;
            background: #fff;
            font-size: 20px;
            cursor: pointer;
            font-weight: 700;
            transition: all 0.1s;
            text-align: center;
            display: flex;
            justify-content: center;
            align-items: center;
            color: #444;
        }

        .choiceBtn:hover:not(:disabled) {
            background: #f9f9f9;
            border-color: #ddd;
            border-bottom-color: #ccc;
            transform: translateY(-2px);
        }
        
        .choiceBtn:active:not(:disabled) {
            transform: translateY(2px);
            border-bottom-width: 3px;
        }

        .choiceBtn:disabled {
            cursor: default;
            opacity: 0.7;
        }
        
        /* FEEDBACK COLORS */
        .choiceBtn.correct {
            background-color: #dff0d8 !important;
            border-color: #3c763d !important;
            color: #3c763d !important;
        }

        .choiceBtn.wrong {
            background-color: #f2dede !important;
            border-color: #a94442 !important;
            color: #a94442 !important;
        }

        /* STATS */
        .stats-container {
            display: flex;
            gap: 20px;
            margin-top: 30px;
            width: 100%;
            justify-content: center;
            padding-bottom: 25px; 
            border-bottom: 2px solid #f0f0f0; 
            margin-bottom: 25px; 
        }

        .stat-box {
            background: #fff;
            padding: 15px 25px;
            border-radius: 15px;
            box-shadow: 0 4px 0 #eee;
            text-align: center;
            min-width: 120px;
            border: 2px solid #eee;
        }

        .stat-label {
            font-size: 13px;
            font-weight: 700;
            color: #888;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .stat-value {
            font-size: 32px;
            font-weight: 900;
            color: var(--pink);
            line-height: 1.1;
        }

        /* CONTROLS */
        .controls {
            width: 100%;
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 10px; 
        }

        .btn {
            border: none;
            cursor: pointer;
            font-weight: 900;
            transition: all 0.1s;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        /* Exit Button */
        #exitBtn {
            background: #ff5e5e;
            color: white;
            font-size: 18px;
            padding: 15px 30px;
            border-radius: 14px;
            box-shadow: 0 4px 0 #cc4b4b;
        }
        
        #exitBtn:hover { background: #e65353; }
        #exitBtn:active { transform: translateY(4px); box-shadow: 0 0 0 #cc4b4b; }
        
        /* Next Button - Hidden by default unless manual override needed */
        #nextBtn {
            background: var(--yellow);
            font-size: 18px;
            padding: 15px 40px;
            border-radius: 14px;
            color: #222;
            box-shadow: 0 4px 0 #e6d43d;
        }

        #nextBtn:hover { background: #ffea70; }
        #nextBtn:active { transform: translateY(4px); box-shadow: 0 0 0 #e6d43d; }


        .result {
            margin-top: 20px;
            font-weight: 800;
            font-size: 24px;
            text-align: center;
            min-height: 36px;
        }

        /* POPUP */
        #popup {
            display: none;
            position: fixed;
            top:0;
            left:0;
            width:100%;
            height:100%;
            background: rgba(0,0,0,0.8);
            justify-content:center;
            align-items:center;
            z-index: 1000;
            backdrop-filter: blur(8px);
        }

        #popupContent {
            background: #fff;
            padding: 60px;
            border-radius: 30px;
            text-align: center;
            max-width: 90%;
            width: 500px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
            border: 6px solid var(--pink);
            animation: popIn 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }
        
        @keyframes popIn {
            from { transform: scale(0.8); opacity: 0; }
            to { transform: scale(1); opacity: 1; }
        }

        #popupMessage {
            margin-bottom: 30px;
            font-size: 36px;
            font-weight: 900;
            color: #333;
            white-space: pre-wrap;
        }

        #popupGoBack {
            padding: 18px 50px;
            border: none;
            border-radius: 16px;
            background: var(--yellow);
            font-size: 20px;
            font-weight: 900;
            cursor: pointer;
            box-shadow: 0 5px 0 #e6d43d;
            transition: all 0.1s;
        }
        
        #popupGoBack:active { transform: translateY(5px); box-shadow: 0 0 0 #e6d43d; }

        /* CONFETTI */
        #confettiCanvas {
            position: fixed;
            top:0;
            left:0;
            width:100%;
            height:100%;
            pointer-events:none;
            z-index: 999;
        }

        /* FOOTER */
        footer {
            text-align: center;
            margin-top: auto;
            padding: 20px;
            font-size: 14px;
            background: rgba(255,255,255,0.3);
            color: #333;
            font-weight: 600;
            width: 100%;
        }
    </style>
</head>
<body>
    <header>
        <div class="header-content">
            <div class="logo">
                <img 
                    src="logo.jpg" 
                    alt="GoMath Logo"
                    onerror="this.src='https://placehold.co/90x90/f4a6b5/ffffff?text=GM';"
                >
            </div>
            
            <div class="header-text-container">
                <h1>GoMath!</h1>
                <p class="small">REAL-WORLD MATH TRAINER</p>
            </div>
        </div>
    </header>

    <div class="container">
        
        <!-- Welcome Screen -->
        <div id="welcomeScreen">
            <h2 class="welcome-title">WELCOME TO GOMATH!</h2>
            <p class="welcome-tagline">The math you can actually use in life.</p>
            
            <p class="welcome-text">Math doesn‚Äôt have to be boring, nosebleed, or something like ‚Äúwhy am I even learning this?‚Äù GoMath transforms math into fun, real-life decision making where you think, solve, and level up your brain like a game ‚Äî not a quiz.</p>

            <p class="welcome-highlight">We created three categories that will test how smart you make choices in real situations:</p>

            <div class="category-list">
                <div class="category-item">
                    <div class="item-title">üí∞ BUDGET QUEST</div>
                    <div class="item-subtitle">Financial Survival Skills</div>
                    <p>Here, it's not just numbers that are your enemy‚Ä¶ it's overpriced deals, discounts, and money traps! Learn how to save, spend wisely, and avoid bad deals. Math that protects your wallet.</p>
                </div>
                <div class="category-item">
                    <div class="item-title">üåé ECOLOGIC</div>
                    <div class="item-subtitle">Statistics & Probability Adventure</div>
                    <p>Decode facts from graphs and data, spot the truth, and understand chances. Because in real life, you can't just guess. Math that helps you choose using facts, not feelings.</p>
                </div>
                <div class="category-item">
                    <div class="item-title">üß† LOGIC BUILDERS</div>
                    <div class="item-subtitle">Think Smarter, Not Harder</div>
                    <p>Solve patterns, puzzles, and tricky logic questions. No calculator needed ‚Äî just your brainpower. Math that trains your decision-making and reasoning.</p>
                </div>
            </div>

            <p class="welcome-text-footer">THIS IS MATH YOU‚ÄôLL ACTUALLY ENJOY</p>
            <p class="welcome-subtext">Not the stressful type. Not the ‚Äúx + y ruined my life‚Äù type. This is useful, exciting, practical math for real students living real life.</p>
            
            <p class="welcome-ready">Ready to play? Let‚Äôs see how smart your choices are.</p>

            <button class="start-btn" id="startGameBtn">START GAME</button>
        </div>

        <!-- Category Selection Card -->
        <div id="categoryCard">
            <h2 class="challenge-title">CHOOSE YOUR CHALLENGE</h2>
            <div class="category-grid">
                <button class="category" onclick="start('budget')">üí∞ BUDGET QUEST</button>
                <button class="category" onclick="start('eco')">üåé ECOLOGIC</button>
                <button class="category" onclick="start('logic')">üß† LOGIC BUILDERS</button>
            </div>
            <button class="secondary-btn" onclick="goBackToWelcome()">‚Üê Back to Overview</button>
        </div>
        
        <!-- Quiz Question Area -->
        <div id="questionArea">
            <span id="catLabel">CATEGORY</span>
            <p class="question" id="qtext">Question Text Goes Here</p>

            <div id="inputArea"></div>

            <div class="result" id="feedback"></div>

            <div class="stats-container">
                <div class="stat-box">
                    <div class="stat-label">Score</div>
                    <div class="stat-value" id="score">0</div>
                </div>
                <div class="stat-box">
                    <div class="stat-label">Streak</div>
                    <div class="stat-value" id="streak">0</div>
                </div>
                <div class="stat-box">
                    <div class="stat-label">Best</div>
                    <div class="stat-value" id="bestScore">0</div>
                </div>
            </div>

            <div class="controls">
                <button class="btn" id="exitBtn" onclick="goBackToWelcome()">Quit Game</button>
                <button class="btn" id="nextBtn" style="display:none;" onclick="nextQuestion()">Next Question</button>
            </div>
        </div>

        <!-- Finish Popup -->
        <div id="popup">
            <div id="popupContent">
                <div id="popupMessage"></div>
                <button id="popupGoBack" onclick="goBack()">Go Back to Menu</button>
            </div>
        </div>
    </div>
    
    <canvas id="confettiCanvas"></canvas>

    <footer>
        GoMath! Trainer | Real-World Math Skills
    </footer>

    <script>
        // DATA
const DATA = {
            budget: [
            { type: 'mcq', q: 'A student wants to buy a notebook priced at ‚Ç±120. The store offers a 10% discount. How much will she pay?', choices: ['‚Ç±108', '‚Ç±112', '‚Ç±120'], answer: '‚Ç±108' },
            { type: 'mcq', q: 'You saved ‚Ç±500 last month. If you want to save 20% more this month, how much will you save?', choices: ['‚Ç±520', '‚Ç±600', '‚Ç±550'], answer: '‚Ç±600' },
            { type: 'mcq', q: 'A snack costs ‚Ç±45. There is a 15% discount. What is the price after discount?', choices: ['‚Ç±38.25', '‚Ç±40', '‚Ç±42'], answer: '‚Ç±38.25' },
            { type: 'mcq', q: 'You have ‚Ç±1,000 for your monthly allowance. You spent ‚Ç±450. How much is left?', choices: ['‚Ç±500', '‚Ç±550', '‚Ç±600'], answer: '‚Ç±550' },
            { type: 'mcq', q: 'A t-shirt is on sale for 25% off. Its original price is ‚Ç±200. How much do you pay?', choices: ['‚Ç±150', '‚Ç±160', '‚Ç±175'], answer: '‚Ç±150' },
            { type: 'mcq', q: 'You want to buy two drinks that cost ‚Ç±35 each. How much do you need to pay?', choices: ['‚Ç±60', '‚Ç±70', '‚Ç±75'], answer: '‚Ç±70' },
            { type: 'mcq', q: 'A bookstore gives 5% discount on all textbooks. If a book costs ‚Ç±800, what is the discounted price?', choices: ['‚Ç±760', '‚Ç±780', '‚Ç±790'], answer: '‚Ç±760' },
            { type: 'mcq', q: 'You earned ‚Ç±1,200 from a part-time job. If you save 30% of it, how much do you save?', choices: ['‚Ç±360', '‚Ç±380', '‚Ç±400'], answer: '‚Ç±360' },
            { type: 'mcq', q: 'Your monthly allowance is ‚Ç±2,000. You spent ‚Ç±1,250. What percentage of your allowance is left?', choices: ['35%', '37.5%', '40%'], answer: '37.5%' },
            { type: 'mcq', q: 'A pen costs ‚Ç±25, but the store has a 10% discount. How much do you pay?', choices: ['‚Ç±20', '‚Ç±22.50', '‚Ç±23'], answer: '‚Ç±22.50' },
            { type: 'mcq', q: 'You want to buy lunch for ‚Ç±150, but you only have ‚Ç±120. How much more money do you need?', choices: ['‚Ç±20', '‚Ç±30', '‚Ç±40'], answer: '‚Ç±30' },
            { type: 'mcq', q: 'You buy a book for ‚Ç±350. There is a 10% discount. What is the final price?', choices: ['‚Ç±310', '‚Ç±315', '‚Ç±320'], answer: '‚Ç±315' },
            { type: 'mcq', q: 'You saved ‚Ç±600 and plan to spend 40% of it on school supplies. How much can you spend?', choices: ['‚Ç±200', '‚Ç±220', '‚Ç±240'], answer: '‚Ç±240' },
            { type: 'mcq', q: 'A bag costs ‚Ç±1,000. During a sale, it‚Äôs 20% off. How much do you save?', choices: ['‚Ç±150', '‚Ç±200', '‚Ç±250'], answer: '‚Ç±200' },
            { type: 'mcq', q: 'Your allowance is ‚Ç±1,500. You spent ‚Ç±450 on food and ‚Ç±300 on transportation. How much is left?', choices: ['‚Ç±650', '‚Ç±700', '‚Ç±750'], answer: '‚Ç±750' },
            { type: 'mcq', q: 'A water bottle costs ‚Ç±60 with a 15% discount. How much is the final price?', choices: ['‚Ç±48', '‚Ç±50', '‚Ç±51'], answer: '‚Ç±51' },
            { type: 'mcq', q: 'You want to save ‚Ç±800 for a new gadget. If you save ‚Ç±200 every week, how many weeks will it take?', choices: ['2', '3', '4'], answer: '4' },
            { type: 'mcq', q: 'A pair of shoes costs ‚Ç±1,200 with a 10% discount. How much do you pay?', choices: ['‚Ç±1,050', '‚Ç±1,080', '‚Ç±1,100'], answer: '‚Ç±1,080' },
            { type: 'mcq', q: 'Your monthly allowance is ‚Ç±2,500. You spend 60% on food and transportation. How much is left for savings?', choices: ['‚Ç±800', '‚Ç±900', '‚Ç±1,000'], answer: '‚Ç±1,000' },
            { type: 'mcq', q: 'You bought 3 pens at ‚Ç±20 each and a notebook at ‚Ç±100. How much did you spend in total?', choices: ['‚Ç±140', '‚Ç±150', '‚Ç±160'], answer: '‚Ç±160' },
            { type: 'mcq', q: 'You bought a bag for ‚Ç±900 after a 10% discount. What was the original price?', choices: ['‚Ç±800', '‚Ç±900', '‚Ç±1,000', '‚Ç±1,100'], answer: '‚Ç±1,000' },
            { type: 'mcq', q: 'Your friend earned ‚Ç±1,500 and saved 25% of it. How much did they save?', choices: ['‚Ç±300', '‚Ç±350', '‚Ç±375', '‚Ç±400'], answer: '‚Ç±375' },
            { type: 'mcq', q: 'A pizza costs ‚Ç±300. If there‚Äôs a 20% discount, how much is the new price?', choices: ['‚Ç±260', '‚Ç±240', '‚Ç±280', '‚Ç±270'], answer: '‚Ç±240' },
            { type: 'mcq', q: 'You have ‚Ç±500. You spend ‚Ç±350 on school supplies. What percent of your money did you spend?', choices: ['65%', '70%', '75%', '80%'], answer: '75%' },
            { type: 'mcq', q: 'A store offers a ‚ÄúBuy 1 Take 1‚Äù deal for ‚Ç±120. How much is each item effectively?', choices: ['‚Ç±60', '‚Ç±70', '‚Ç±80', '‚Ç±90'], answer: '‚Ç±60' },
            { type: 'mcq', q: 'You have ‚Ç±1,000. You want to save 40%. How much will you save?', choices: ['‚Ç±300', '‚Ç±400', '‚Ç±500', '‚Ç±600'], answer: '‚Ç±400' },
            { type: 'mcq', q: 'A jacket costs ‚Ç±1,800 but is now 30% off. How much is the discount amount?', choices: ['‚Ç±360', '‚Ç±450', '‚Ç±540', '‚Ç±600'], answer: '‚Ç±540' },
            { type: 'mcq', q: 'Your allowance increased from ‚Ç±1,000 to ‚Ç±1,200. What is the percentage increase?', choices: ['10%', '15%', '20%', '25%'], answer: '20%' },
            { type: 'mcq', q: 'You want to buy a ‚Ç±500 headset. If it‚Äôs discounted by 15%, how much do you pay?', choices: ['‚Ç±415', '‚Ç±425', '‚Ç±430', '‚Ç±440'], answer: '‚Ç±425' },
            { type: 'mcq', q: 'A store gives 10% cashback on every ‚Ç±1,000 purchase. How much cashback will you get if you spend ‚Ç±2,500?', choices: ['‚Ç±100', '‚Ç±200', '‚Ç±250', '‚Ç±300'], answer: '‚Ç±200' },
            { type: 'mcq', q: 'Your total grocery bill is ‚Ç±920. You have a ‚Ç±100 voucher. How much do you pay?', choices: ['‚Ç±720', '‚Ç±800', '‚Ç±820', '‚Ç±840'], answer: '‚Ç±820' },
            { type: 'mcq', q: 'You save ‚Ç±150 weekly. How much will you save in 2 months (8 weeks)?', choices: ['‚Ç±900', '‚Ç±1,000', '‚Ç±1,150', '‚Ç±1,200'], answer: '‚Ç±1,200' },
            { type: 'mcq', q: 'A ‚Ç±2,000 phone case set is discounted by 40%. How much is the sale price?', choices: ['‚Ç±1,000', '‚Ç±1,200', '‚Ç±1,400', '‚Ç±1,600'], answer: '‚Ç±1,200' },
            { type: 'mcq', q: 'You spent ‚Ç±600 out of ‚Ç±1,500 allowance. What percentage is left?', choices: ['40%', '50%', '55%', '60%'], answer: '60%' },
            { type: 'mcq', q: 'A ‚Ç±900 pair of shoes is on sale for ‚Ç±765. What is the discount rate?', choices: ['10%', '12%', '15%', '20%'], answer: '15%' },
            { type: 'mcq', q: 'You plan to save ‚Ç±2,400 in 6 months. How much should you save each month?', choices: ['‚Ç±200', '‚Ç±300', '‚Ç±400', '‚Ç±500'], answer: '‚Ç±400' },
            { type: 'mcq', q: 'A ‚Ç±1,000 backpack is on sale for 25% off. What is the final price?', choices: ['‚Ç±650', '‚Ç±700', '‚Ç±750', '‚Ç±800'], answer: '‚Ç±750' },
            { type: 'mcq', q: 'You have ‚Ç±3,000 savings. You use 40% to buy gifts. How much is left?', choices: ['‚Ç±1,200', '‚Ç±1,500', '‚Ç±1,700', '‚Ç±1,800'], answer: '‚Ç±1,800' },
            { type: 'mcq', q: 'You spend ‚Ç±800 on your ‚Ç±2,000 allowance. What percent did you spend?', choices: ['30%', '35%', '40%', '45%'], answer: '40%' },
            { type: 'mcq', q: 'You want to buy three shirts for ‚Ç±250 each but get a 10% discount on the total. How much will you pay?', choices: ['‚Ç±650', '‚Ç±660', '‚Ç±675', '‚Ç±700'], answer: '‚Ç±675' }
            ],

            eco: [
            { type: 'mcq', q: 'A bar graph shows the number of trees planted in four barangays. Barangay A planted 50 trees, Barangay B planted 70, Barangay C planted 60, and Barangay D planted 40. Which barangay planted the most trees?', choices: ['Barangay A', 'Barangay B', 'Barangay C', 'Barangay D'], answer: 'Barangay B' },
            { type: 'mcq', q: 'In a pie chart of waste types, plastic makes up 40% of total waste. What fraction is that of the whole?', choices: ['1/2', '1/4', '2/5', '3/10'], answer: '2/5' },
            { type: 'mcq', q: 'If it rained on 3 out of 10 days, what is the probability of rain on any given day?', choices: ['0.3', '0.7', '3', '10'], answer: '0.3' },
            { type: 'mcq', q: 'A survey shows that 25 students bring reusable bottles and 75 bring plastic ones. What percentage bring reusable bottles?', choices: ['20%', '25%', '30%', '50%'], answer: '25%' },
            { type: 'mcq', q: 'Which of the following graphs is best for showing parts of a whole?', choices: ['Line graph', 'Bar graph', 'Pie chart', 'Histogram'], answer: 'Pie chart' },
            { type: 'mcq', q: 'A spinner has 4 equal sections: red, blue, green, and yellow. What is the chance of landing on green?', choices: ['1/2', '1/3', '1/4', '1/5'], answer: '1/4' },
            { type: 'mcq', q: 'A group of students collected data on water usage at home. What type of graph is best to show changes over time?', choices: ['Line graph', 'Bar graph', 'Pictograph', 'Pie chart'], answer: 'Line graph' },
            { type: 'mcq', q: 'In a class of 40 students, 10 walk to school. What percent walk?', choices: ['10%', '20%', '25%', '40%'], answer: '25%' },
            { type: 'mcq', q: 'If there is a 50% chance of rain tomorrow, what word best describes the chance?', choices: ['Certain', 'Impossible', 'Likely', 'Even'], answer: 'Even' },
            { type: 'mcq', q: 'A pie chart shows waste materials: paper (30%), glass (20%), plastic (40%), and metal (10%). Which waste is least common?', choices: ['Paper', 'Glass', 'Plastic', 'Metal'], answer: 'Metal' },
            { type: 'mcq', q: 'The average daily temperature for a week was recorded. Which measure best describes the middle value of the data?', choices: ['Mode', 'Mean', 'Median', 'Range'], answer: 'Median' },
            { type: 'mcq', q: 'A dice is rolled once. What is the probability of getting an even number?', choices: ['1/6', '1/2', '1/3', '2/3'], answer: '1/2' },
            { type: 'mcq', q: 'A recycling center collected 200 kg of paper last month and 300 kg this month. What is the percent increase?', choices: ['25%', '30%', '50%', '100%'], answer: '50%' },
            { type: 'mcq', q: 'Which of these describes data interpretation?', choices: ['Collecting data', 'Reading and understanding data in a graph', 'Making a survey', 'Drawing pictures'], answer: 'Reading and understanding data in a graph' },
            { type: 'mcq', q: 'A bag has 8 blue marbles and 2 red marbles. What is the chance of picking a red marble?', choices: ['1/10', '1/5', '2/5', '4/5'], answer: '1/5' },
            { type: 'mcq', q: 'If 60% of students use reusable bags, what percent do not use them?', choices: ['20%', '30%', '40%', '50%'], answer: '40%' },
            { type: 'mcq', q: 'What does a taller bar in a bar graph mean?', choices: ['Less quantity', 'More quantity', 'Equal quantity', 'No quantity'], answer: 'More quantity' },
            { type: 'mcq', q: 'The rainfall in four months is: Jan ‚Äì 20 mm, Feb ‚Äì 30 mm, Mar ‚Äì 25 mm, Apr ‚Äì 15 mm. Which month had the least rainfall?', choices: ['January', 'February', 'March', 'April'], answer: 'April' },
            { type: 'mcq', q: 'If a coin is flipped, what are the possible outcomes?', choices: ['1', '2', '3', '4'], answer: '2' },
            { type: 'mcq', q: 'A community plants 400 trees this year and plans to plant 600 next year. What is the percentage increase in tree planting?', choices: ['25%', '33%', '50%', '100%'], answer: '50%' }
            ], 


            logic: [
                { type: 'mcq', q: 'What number comes next? 2, 4, 8, 16, __', choices: ['20', '24', '32', '36'], answer: '32' },
                { type: 'mcq', q: 'Arrange the numbers from smallest to largest: ‚àö25, 3¬≥, 2‚Åµ, 5¬≤', choices: ['‚àö25, 5¬≤, 3¬≥, 2‚Åµ', '‚àö25, 3¬≥, 5¬≤, 2‚Åµ', '‚àö25, 5¬≤, 2‚Åµ, 3¬≥', '‚àö25, 3¬≥, 2‚Åµ, 5¬≤'], answer: '‚àö25, 3¬≥, 2‚Åµ, 5¬≤' },
                { type: 'mcq', q: '‚ÄúIf all circles are shapes and all shapes have sides, then circles have sides.‚Äù', choices: ['True', 'False'], answer: 'False' },
                { type: 'mcq', q: 'Which number doesn‚Äôt belong? 2, 3, 5, 9, 11', choices: ['2', '3', '5', '9', '11'], answer: '9' },
                { type: 'mcq', q: 'If ‚ÄúMATH‚Äù = 42, then what is ‚ÄúLOGIC‚Äù? (A=1, B=2, ‚Ä¶ Z=26)', choices: ['52', '56', '60', '65'], answer: '60' },
                { type: 'mcq', q: '‚ÄúIf today is Friday, then yesterday was Saturday.‚Äù', choices: ['True', 'False'], answer: 'False' },
                { type: 'mcq', q: 'Three friends always lie on Mondays and tell the truth on other days. If they all said ‚ÄúYesterday was Monday,‚Äù what day is it today?', choices: ['Monday', 'Tuesday', 'Wednesday', 'Sunday'], answer: 'Tuesday' },
                { type: 'mcq', q: 'If A=1, B=2, C=3‚Ä¶ what is the total of ‚ÄúSMART‚Äù?', choices: ['60', '71', '73', '75'], answer: '73' },
                { type: 'mcq', q: 'All rectangles are squares.', choices: ['True', 'False'], answer: 'False' },
                { type: 'mcq', q: 'You double ‚Ç±10 every day for five days. How much will you have on the 5th day?', choices: ['‚Ç±80', '‚Ç±100', '‚Ç±160', '‚Ç±320'], answer: '‚Ç±320' },
                { type: 'mcq', q: 'If 5 pencils cost ‚Ç±50, how much do 3 pencils cost?', choices: ['‚Ç±20', '‚Ç±25', '‚Ç±30', '‚Ç±35'], answer: '‚Ç±25' },
                { type: 'mcq', q: '‚ÄúThe opposite of always is never.‚Äù', choices: ['True', 'False'], answer: 'True' },
                { type: 'mcq', q: 'If you multiply this number by any other number, the answer is always the same. What number is it?', choices: ['0', '1', '2', '10'], answer: '0' },
                { type: 'mcq', q: 'Find the missing number: 3, 6, 12, 24, __', choices: ['30', '36', '48', '60'], answer: '48' },
                { type: 'mcq', q: 'If all roses are flowers, and some flowers fade quickly, then:', choices: ['All roses fade quickly', 'Some roses fade quickly', 'Some flowers are roses', 'None of the above'], answer: 'Some flowers are roses' },
                { type: 'mcq', q: '1, 4, 9, 16, 25, __', choices: ['30', '36', '42', '49'], answer: '36' },
                { type: 'mcq', q: 'If A is taller than B, and B is taller than C, who‚Äôs the tallest?', choices: ['A', 'B', 'C', 'None'], answer: 'A' },
                { type: 'mcq', q: 'If a statement is true, its negation is false.', choices: ['True', 'False'], answer: 'True' },
                { type: 'mcq', q: 'You‚Äôre in a race and you pass the person in 2nd place. What place are you now in?', choices: ['1st', '2nd', '3rd', '4th'], answer: '2nd' },
                { type: 'mcq', q: 'If MATH = 42 and LOGIC = 52, what will ‚ÄúBRAIN‚Äù most likely equal?', choices: ['48', '49', '50', '51'], answer: '49' }
            ]
};


        // VARIABLES
        let currentCategory = '';
        let currentIndex = 0;
        let score = 0;
        let streak = 0;
        let confettiAnimation;
        let gameFinished = false;
        let autoNextTimeout = null;
        
        // Caching DOM elements
        const welcomeScreen = document.getElementById('welcomeScreen');
        const categoryCard = document.getElementById('categoryCard');
        const questionArea = document.getElementById('questionArea');
        const catLabel = document.getElementById('catLabel');
        const qtext = document.getElementById('qtext');
        const inputArea = document.getElementById('inputArea');
        const feedback = document.getElementById('feedback');
        const scoreElement = document.getElementById('score');
        const streakElement = document.getElementById('streak');
        const bestScoreElement = document.getElementById('bestScore');
        const nextBtn = document.getElementById('nextBtn');
        const exitBtn = document.getElementById('exitBtn');
        const popup = document.getElementById('popup');
        const message = document.getElementById('popupMessage');
        const canvas = document.getElementById('confettiCanvas');
        const startGameBtn = document.getElementById('startGameBtn');
        
        // Local Storage
        let bestScores = { budget: 0, eco: 0, logic: 0 };
        try {
            const stored = localStorage.getItem("gomath_best_scores");
            if (stored) bestScores = JSON.parse(stored);
        } catch(e) {}

        function saveBestScores() {
            try {
                localStorage.setItem("gomath_best_scores", JSON.stringify(bestScores));
            } catch(e) {}
        }

        // AUDIO SETUP (HTML5)
        const bgmSnd = new Audio('bgm.mp3');
        bgmSnd.loop = true; 
        
        const correctSnd = new Audio('correct.mp3');
        const wrongSnd = new Audio('wrong.mp3');
        const streakSnd = new Audio('streak.mp3'); 
        const winSnd = new Audio('win.mp3');
        const loseSnd = new Audio('lose.mp3'); 
        const niceSnd = new Audio('nice.mp3'); // Added nice.mp3
        const lolSnd = new Audio('lol.mp3');

        function playBGM() {
            if (bgmSnd.paused) {
                bgmSnd.volume = 0.08; 
                bgmSnd.play().catch(e => console.warn("BGM blocked:", e));
            }
        }

        function stopBGM() {
            if (bgmSnd) {
                bgmSnd.pause();
                bgmSnd.currentTime = 0;
            }
        }

        function playEffect(type) {
            let sfx;
            switch (type) {
                case 'correct': sfx = correctSnd; break;
                case 'wrong': sfx = wrongSnd; break;
                case 'streak': sfx = streakSnd; break;
                case 'win': sfx = winSnd; break;
                case 'lose': sfx = loseSnd; break;
                case 'nice': sfx = niceSnd; break; // Added case for nice
                case 'lol' : sfx = lolSnd; break; 
                default: return;
            }
            if (sfx) {
                sfx.pause();
                sfx.currentTime = 0;
                sfx.volume = 1.0;
                sfx.play().catch(e => console.warn(`SFX ${type} blocked:`, e));
            }
        }

        // VIEW TRANSITIONS
        function hideAllScreens() {
            welcomeScreen.style.display = 'none';
            categoryCard.style.display = 'none';
            questionArea.style.display = 'none';
            popup.style.display = 'none';
        }

        function showCategorySelection() {
            hideAllScreens();
            categoryCard.style.display = 'flex';
        }
        
        function goBackToWelcome() {
            stopBGM();
            hideAllScreens();
            welcomeScreen.style.display = 'block';
        }

        document.addEventListener('DOMContentLoaded', () => {
            hideAllScreens();
            welcomeScreen.style.display = 'block';

            if (startGameBtn) {
                startGameBtn.addEventListener('click', () => {
                    showCategorySelection(); 
                });
            }
        });

        // GAME FUNCTIONS
        function start(category) {
            currentCategory = category;
            currentIndex = 0;
            score = 0;
            streak = 0;
            gameFinished = false;

            updateStats();
            document.getElementById('bestScore').innerText = bestScores[currentCategory];
            catLabel.innerText = category.toUpperCase();

            categoryCard.style.display = 'none';
            questionArea.style.display = 'flex';
            
            playBGM(); // START BGM HERE (after choice)
            showQuestion();
        }

        function showQuestion() {
            // Check if all questions are answered
            if (currentIndex >= DATA[currentCategory].length) {
                endGame();
                return;
            }
            
            const q = DATA[currentCategory][currentIndex];

            qtext.innerText = q.q;
            inputArea.innerHTML = '';
            feedback.innerText = '';
            nextBtn.style.display = 'none';
            exitBtn.style.display = 'inline-block';
            gameFinished = false;

            const choices = [...q.choices].sort(() => Math.random() - 0.5);

            choices.forEach(choice => {
                const btn = document.createElement('button');
                btn.className = 'choiceBtn';
                btn.innerText = choice;
                btn.onclick = () => checkAnswer(btn, choice, q.answer);
                inputArea.appendChild(btn);
            });
        }

        function checkAnswer(btn, selected, correct) {
            if (gameFinished) return;
            gameFinished = true;

            document.querySelectorAll('.choiceBtn').forEach(b => {
                b.disabled = true;
                if(b.innerText === correct) b.classList.add('correct');
            });

            if (selected === correct) {
                score++;
                streak++;
                btn.classList.add('correct');
                feedback.innerHTML = '<span style="color: green;">‚úÖ Correct!</span>';
                playEffect('correct');
                if(streak > 2) playEffect('streak');
            } else {
                streak = 0;
                btn.classList.add('wrong');
                feedback.innerHTML = `<span style="color: red;">‚ùå Incorrect. Answer: ${correct}</span>`;
                playEffect('wrong');
            }
            
            updateStats();
            
            // Auto-Next after delay (1.5s) regardless of result
            if (autoNextTimeout) clearTimeout(autoNextTimeout);
            autoNextTimeout = setTimeout(nextQuestion, 1500);
        }

        function nextQuestion() {
            currentIndex++;
            if (currentIndex < DATA[currentCategory].length) {
                showQuestion();
            } else {
                endGame();
            }
        }

        function updateStats() {
            scoreElement.innerText = score;
            streakElement.innerText = streak;
        }

        function endGame() {
            stopBGM();
            if (autoNextTimeout) clearTimeout(autoNextTimeout);
            
            if (score > bestScores[currentCategory]) {
                bestScores[currentCategory] = score;
                saveBestScores();
            }

            const total = DATA[currentCategory].length;
            
            // Determine result sound & message
            if (score === total) {
                // Perfect
                message.innerHTML = `üéâ PERFECT SCORE! üéâ<br>Score: ${score}/${total}`;
                playEffect('win');
                startConfetti();

            } else if (score === 19) {
                // One point away
                message.innerHTML = `üòÆ 1 MORE POINT LEFT BRUH<br>Score: ${score}/${total}`;
                playEffect('lol');

            } else if (score > 15) {
                // Over 15
                message.innerHTML = `üëç Nice Try!<br>Score: ${score}/${total}`;
                playEffect('nice');

            }  else if (score < 15) 
                // Partial (Not Bad)
                message.innerHTML = `üôÇ Not Bad!<br>Your Score: ${score}/${total}`;
                playEffect('nice');

            } else if (score === 0) {
                // Zero
                message.innerHTML = `üò¢ Better luck next game!<br>Score: ${score}/${total}`;
                playEffect('lose');
                
            } else {
                // Partial (Not Bad)
                message.innerHTML = `üôÇ There's still some room for improvement<br>Your Score: ${score}/${total}`;
                playEffect('nice');
            }


            questionArea.style.display = 'none';
            popup.style.display = 'flex';
        }

        function goBack() {
            if(confettiAnimation) cancelAnimationFrame(confettiAnimation);
            ctx.clearRect(0,0,canvas.width, canvas.height);
            
            popup.style.display = 'none';
            categoryCard.style.display = 'flex';
            
            // Stop BGM if playing, it will restart when a new category is chosen
            stopBGM();
        }

        // CONFETTI
        const ctx = canvas.getContext('2d');
        let particles = [];
        
        function startConfetti() {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
            particles = [];
            for(let i=0; i<150; i++) {
                particles.push({
                    x: Math.random() * canvas.width,
                    y: Math.random() * canvas.height - canvas.height,
                    r: Math.random() * 6 + 2,
                    c: ['#f4a6b5','#f4e04d','#fff'][Math.floor(Math.random()*3)],
                    v: Math.random() * 5 + 2
                });
            }
            animateConfetti();
        }

        function animateConfetti() {
            ctx.clearRect(0,0,canvas.width, canvas.height);
            particles.forEach(p => {
                ctx.beginPath();
                ctx.arc(p.x, p.y, p.r, 0, Math.PI*2);
                ctx.fillStyle = p.c;
                ctx.fill();
                p.y += p.v;
                if(p.y > canvas.height) p.y = 0;
            });
            confettiAnimation = requestAnimationFrame(animateConfetti);
        }
    </script>
</body>

</html> 


